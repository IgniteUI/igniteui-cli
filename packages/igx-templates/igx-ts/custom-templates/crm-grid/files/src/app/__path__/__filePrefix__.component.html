<div class="grid__wrapper">
  <igx-grid #grid1 igxPreventDocumentScroll id="grid1" [data]="localData" height="430px" width="100%"
    [rowSelection]="selectionMode" displayDensity="cosy" rowHeight="50" [allowFiltering]="true" [moving]="true">
    <igx-grid-toolbar>
      <igx-grid-toolbar-title>
        <div class="crm-toolbar-template">
          <div class="crm-sample-toolbar__title">
            <span class="logo-propeller">
              <img src="assets/images/propeller-logo.svg" class="animated-fan" />
            </span>
            <span class="crm-sample-toolbar__ellipsis">Business Propeller</span>
          </div>
          <div class="sample-flex-container">
            <igx-input-group type="search" class="searchInputGroup">
              <igx-prefix>
                <igx-icon class="prefixIcon" *ngIf="searchText.length === 0">search</igx-icon>
                <igx-icon class="prefixIcon" *ngIf="searchText.length > 0" (click)="clearSearch()">clear</igx-icon>
              </igx-prefix>

              <input #search1 id="search1" class="searchInput" igxInput placeholder="Search" [(ngModel)]="searchText"
                (ngModelChange)="grid1.findNext(searchText, caseSensitive)" (keydown)="searchKeyDown($event)" />

              <igx-suffix *ngIf="searchText.length > 0">
                <div class="resultsText" *ngIf="grid1.lastSearchInfo">
                  <span *ngIf="grid1.lastSearchInfo.matchInfoCache.length > 0">
                    {{ grid1.lastSearchInfo.activeMatchIndex + 1 }} of {{
                    grid1.lastSearchInfo.matchInfoCache.length }} results
                  </span>
                  <span *ngIf="grid1.lastSearchInfo.matchInfoCache.length === 0">
                    No results
                  </span>
                </div>
                <div class="caseSensitiveButton">
                  <button igxButton="icon" igxRipple [igxRippleCentered]="true" (click)="updateSearch()"
                    igxButtonBackground="caseSensitive? 'rgb(73, 180, 254)' : 'transparent'">
                    <igx-icon class="caseSensitiveIcon" family="material">text_fields</igx-icon>
                  </button>
                </div>
                <div class="searchButtons">
                  <button igxButton="icon" igxRipple [igxRippleCentered]="true"
                    (click)="grid1.findPrev(searchText, caseSensitive)">
                    <igx-icon family="material">navigate_before</igx-icon>
                  </button>
                  <button igxButton="icon" igxRipple [igxRippleCentered]="true"
                    (click)="grid1.findNext(searchText, caseSensitive)">
                    <igx-icon family="material">navigate_next</igx-icon>
                  </button>
                </div>
              </igx-suffix>
            </igx-input-group>
          </div>
        </div>
      </igx-grid-toolbar-title>
      <igx-grid-toolbar-actions>
        <igx-grid-toolbar-hiding></igx-grid-toolbar-hiding>
        <igx-grid-toolbar-pinning></igx-grid-toolbar-pinning>
        <igx-grid-toolbar-exporter></igx-grid-toolbar-exporter>
      </igx-grid-toolbar-actions>
    </igx-grid-toolbar>

    <igx-column field="id" header="Customer Number" width="172" [pinned]="true" [hasSummary]="false" [resizable]="true"
      [hidden]="true">
    </igx-column>

    <igx-column field="avatar" header="Photo" width="88" [pinned]="true" [resizable]="true" [searchable]="false"
      [filterable]="false">
      <ng-template igxCell let-cell="cell">
        <div class="cell__inner avatar-cell">
          <igx-avatar [src]="cell.row.data.avatar" [shape]="'square'" size="small"></igx-avatar>
        </div>
      </ng-template>
    </igx-column>

    <igx-column field="name" header="Name" [sortable]="true" width="149" [pinned]="true" [resizable]="true"
      [hasSummary]="false">
    </igx-column>

    <igx-column field="deals_total" header="Total Deals" [sortable]="true" width="130" dataType="number"
      [hasSummary]="false" [summaries]="dealsSummary" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="deals_won" header="Won Deals" [sortable]="true" width="130" dataType="number"
      [hasSummary]="false" [summaries]="dealsSummary" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="ratio" header="Ratio" width="150" [resizable]="true" [filterable]="false">
      <ng-template igxCell let-val>
        <div style="width: 100%">
          <igx-linear-bar [textVisibility]="false" class="cell__inner_2" [value]="val" [animate]="false">
          </igx-linear-bar>
        </div>
      </ng-template>
    </igx-column>

    <igx-column field="Deals" header="Ratio per month" width="160px" [filterable]="false">
      <ng-template igxCell let-val>
        <igx-sparkline height="40px" width="160px" [dataSource]="val" valueMemberPath="Deals"
          [displayType]="displayType.Column" brush="rgb(21, 190, 6)" negativeBrush="rgb(211, 17, 3)">
        </igx-sparkline>
      </ng-template>
    </igx-column>

    <igx-column field="deals_lost" header="Lost Deals" [sortable]="true" width="130" dataType="number"
      [hasSummary]="false" [summaries]="dealsSummary" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="deals_pending" header="Pending Deals" [sortable]="true" width="130" dataType="number"
      [hasSummary]="false" [summaries]="dealsSummary" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="position" header="Position" width="200" [resizable]="true">
    </igx-column>

    <igx-column field="company" header="Company" [sortable]="true" width="130" [hasSummary]="false" [resizable]="true"
     >
    </igx-column>

    <igx-column field="email" header="Email" width="240" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="work_phone" header="Work Phone" width="160" [resizable]="true"
      [filterable]="false">
    </igx-column>

    <igx-column field="mobile_phone" header="Mobile Phone" width="160" [resizable]="true"
      [filterable]="false">
    </igx-column>

    <igx-column field="fax" header="Fax" width="160" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="tags" header="Tags" width="160" [resizable]="true">
    </igx-column>

    <igx-column field="street" header="Street" width="160" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="city" header="City" width="160" [resizable]="true">
    </igx-column>

    <igx-column field="post_code" header="Post Code" width="100" [resizable]="true"
      [filterable]="false">
    </igx-column>

    <igx-column field="state" header="State" width="105" [resizable]="true">
    </igx-column>

    <igx-column field="country" header="Country" [sortable]="true" width="160" [resizable]="true">
    </igx-column>

    <igx-column field="created_on" header="Created On" dataType="date" [formatter]="formatDate" [sortable]="true"
      width="150" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="referred_by" header="Referred By" width="160" [resizable]="true">
    </igx-column>

    <igx-column field="birthday" header="Birthday" width="160" dataType="date" [formatter]="formatDate"
      [hasSummary]="false" [summaries]="soonSummary" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="last_activity" header="Last Activity" width="160" dataType="date" [formatter]="formatDate"
      [hasSummary]="false" [summaries]="earliestSummary" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="next_activity" header="Next Activity" width="160" dataType="date" [formatter]="formatDate"
      [hasSummary]="false" [summaries]="earliestSummary" [resizable]="true" [filterable]="false">
    </igx-column>

    <igx-column field="estimated_sales" header="Possible Sales ($)" [sortable]="true" width="150" dataType="number"
      [hasSummary]="false" [summaries]="dealsSummary" [resizable]="true" [filterable]="false">
      <ng-template igxCell let-cell="cell" let-val>
        {{ formatValue(val) }}
      </ng-template>
    </igx-column>

    <igx-column field="actual_sales" header="Actual Sales ($)" [sortable]="true" width="150" dataType="number"
      [hasSummary]="false" [summaries]="dealsSummary" [resizable]="true" [filterable]="false">
      <ng-template igxCell let-val>
        {{ formatValue(val) }}
      </ng-template>
    </igx-column>
  </igx-grid>
</div>
